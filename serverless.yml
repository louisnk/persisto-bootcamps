service: persisto-bootcamps

provider:
  name: aws
  runtime: nodejs6.10
  memorySize: 128
  stage: dev
  profile: persisto-sls
  region: us-east-1
  deploymentBucket: persisto-bootcamps-deployments
  timeout: 15
  environment:
    POSTMARK_KEY: ${ env:POSTMARK_KEY }
    AWS_DEFAULT_BUCKET: ${ env:AWS_DEFAULT_BUCKET }
  iamRoleStatements:
    - Effect: Allow
      Action:
        - s3:GetObject
        - s3:PutObject
        - s3:ListObjects
      Resource:
        - arn:aws:s3:::${ env:AWS_ACCOUNT_ID }/*

# you can add packaging information here
package:
  include:
    # - '**/*.js'
    # - vendored/**
  exclude:
    - '*.envrc'
    - '*.spec.*'
    - v_env/**

functions:
  post:
    handler: handler.post
    events:
      - http:
          path: signup
          method: post
          queryParameters:
            email: $input.body('email')
            name: $input.body('name')
            profile: $input.body('profile')
            additional: $input.body('additional')

# resources:
#   Resources:
      # pathmapping:
      #   Type: AWS::ApiGateway::BasePathMapping
      #   Properties:
      #     BasePath: oauth2
      #     DomainName: ${self:vars.domainName}
      #     RestApiId:
      #       Ref: ApiGatewayRestApi
      #     Stage: ${self:vars.stage}
#     DeadLetterQueue:
#       Type: "AWS::SNS::Topic"
#       Properties:
#         TopicName: avature-dead-letter-${self:provider.stage}
